<!--Nhận dữ liệu từ Action Detail của ProductController truyền qua-->
@model DoAn_PTUDWEB.Models.ProductDetail



@{
    ViewBag.Title = "Sản phẩm";
}

	<!-- ============================Start Phần sản phẩm ======================== -->
	<section class="section-content bg-white padding-y">
		<div class="container">
			<div class="row">
				<!--Start phần ảnh sản phẩm-->
				<aside class="col-md-6">
					<div class="card">
						<article class="gallery-wrap">
							<!--Start phần ảnh to-->
							<div class="img-big-wrap">
							<div> <a href="#"><img class="bigImage img-fluid" src="@Model.Product.Thumbnail"></a></div>
							</div>
							<!--End phần ảnh to-->
							<!--Start phần ảnh nhỏ-->
							<div class="thumbs-wrap">
							@foreach (var image in @Model.Images)
							{
								<a href="#" class="item-thumb"> <img class="smallImage" src="@image.Thumbnail" /></a>
								
							}	
							</div>
							<!--End phần ảnh nhỏ-->

						</article>
					</div>
				</aside>
				<!--End phần ảnh sản phẩm-->
				<!--Start Phần thông tin sản phẩm-->
				<main class="col-md-6">
					<article class="product-info-aside">

					<h2 class="title mt-3">@Model.Product.Name </h2>

						<div class="rating-wrap my-3">
							<ul class="rating-stars">
								<li style="width:80%" class="stars-active">
									<i class="fa fa-star"></i> <i class="fa fa-star"></i>
									<i class="fa fa-star"></i> <i class="fa fa-star"></i>
									<i class="fa fa-star"></i>
								</li>
								<li>
									<i class="fa fa-star"></i> <i class="fa fa-star"></i>
									<i class="fa fa-star"></i> <i class="fa fa-star"></i>
									<i class="fa fa-star"></i>
								</li>
							</ul>
							<small class="label-rating text-muted">132 Đánh giá</small>
							<small class="label-rating text-success"> <i class="fa fa-clipboard-check"></i> 154 Đã bán </small>
						</div>
						<!-- Start Giá sản phẩm-->
						<div class="mb-3">
						<var class="price h4">@Model.Product.PriceSale</var>
							<small>đ</small>
						<del class="price-old">@Model.Product.Price</del>
							<small class="text-muted">đ</small>
						</div>
						<!-- End Giá sản phẩm-->
						<!--Start chọn màu-->
						<div class="d-flex justify-content-start align-items-center my-3">
							<label>Màu:</label>
							<select class="input-select form-control w-25 ml-2">
							@foreach (var color in @Model.Colors)
							{
								<option value="0">@color.ColorName</option>

							}
						</select>
						</div>
						<!--End chọn màu-->


						<div class="form-row  mt-4">
							<!--Thanh thêm bớt sản phẩm-->
							<div class="form-group col-md flex-grow-0">
								<div class="input-group mb-3 input-spinner">
									<div class="input-group-prepend">
										<button class="btn btn-light" type="button" id="button-plus"> + </button>
									</div>
									<input type="text" class="form-control" value="1">
									<div class="input-group-append">
										<button class="btn btn-light" type="button" id="button-minus"> &minus; </button>
									</div>
								</div>
							</div>
							<!--2 nút -->
							<div class="form-group col-md">
								<a href="#" class="btn  btn-primary">
									<i class="fas fa-shopping-cart"></i> <span class="text">Thêm vào giỏ hàng</span>
								</a>
							<a href="/Product/Cart" class="btn btn-light">
									<i class="fa fa-heart"></i> <span class="text">Xem giỏ hàng</span>
								</a>

							</div>
						</div>

					</article>
				</main>
				<!--End Phần thông tin sản phẩm-->
			</div>
		</div>
	</section>
	<!-- ================ End Phần sản phẩm ================= -->


<!-- ========================= Start Phần mô tả và đánh giá  ========================= -->
<section class="section-name padding-y bg">
	<div class="container">
		<div class="row">
			<div class="col-md-8">
				<!--start phần mô tả-->
				<h4>Mô tả</h4>
				<p>
					@Model.Product.Description
				</p>
				
				<!--End  phần mô tả-->
				<!--Start phần đánh giá-->
				<div class="mb-4">
					<h3 class="mb-4">Đánh giá sản phẩm</h3>
					<div class="row align-items-center mb-4">
						<div class="col-lg-6 col-md-6 mb-4 mb-md-0 col-sm-12">
							<!-- rating -->
							<h3 class="display-2 ">4.5</h3>
							<i class="bi bi-star-fill text-success"></i>
							<i class="bi bi-star-fill text-success"></i>
							<i class="bi bi-star-fill text-success"></i>
							<i class="bi bi-star-fill text-success"></i>
							<i class="bi bi-star-fill text-success"></i>
						</div>
						<div class=" col-lg-6 col-md-6 col-sm-12">
							<!-- progress -->
							<div class="d-flex align-items-center mb-2">
								<div class="text-nowrap me-3 text-muted"><span class="d-inline-block align-middle text-muted">5</span><i class="bi bi-star-fill ms-1 fs-6"></i></div>
								<div class="w-100">
									<div class="progress" style="height: 6px;">
										<div class="progress-bar bg-success" role="progressbar" style="width: 60%;" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
									</div>
								</div><span class="text-muted ms-3">420</span>
							</div>
							<!-- progress -->
							<div class="d-flex align-items-center mb-2">
								<div class="text-nowrap me-3 text-muted"><span class="d-inline-block align-middle text-muted">4</span><i class="bi bi-star-fill ms-1 fs-6"></i></div>
								<div class="w-100">
									<div class="progress" style="height: 6px;">
										<div class="progress-bar bg-success" role="progressbar" style="width: 50%;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="50"></div>
									</div>
								</div><span class="text-muted ms-3">90</span>
							</div>
							<!-- progress -->
							<div class="d-flex align-items-center mb-2">
								<div class="text-nowrap me-3 text-muted"><span class="d-inline-block align-middle text-muted">3</span><i class="bi bi-star-fill ms-1 fs-6"></i></div>
								<div class="w-100">
									<div class="progress" style="height: 6px;">
										<div class="progress-bar bg-success" role="progressbar" style="width: 35%;" aria-valuenow="35" aria-valuemin="0" aria-valuemax="35"></div>
									</div>
								</div><span class="text-muted ms-3">33</span>
							</div>
							<!-- progress -->
							<div class="d-flex align-items-center mb-2">
								<div class="text-nowrap me-3 text-muted"><span class="d-inline-block align-middle text-muted">2</span><i class="bi bi-star-fill ms-1 fs-6"></i></div>
								<div class="w-100">
									<div class="progress" style="height: 6px;">
										<div class="progress-bar bg-warning" role="progressbar" style="width: 22%;" aria-valuenow="22" aria-valuemin="0" aria-valuemax="22"></div>
									</div>
								</div><span class="text-muted ms-3">12</span>
							</div>
							<!-- progress -->
							<div class="d-flex align-items-center mb-2">
								<div class="text-nowrap me-3 text-muted"><span class="d-inline-block align-middle text-muted">1</span><i class="bi bi-star-fill ms-1 fs-6"></i></div>
								<div class="w-100">
									<div class="progress" style="height: 6px;">
										<div class="progress-bar bg-danger" role="progressbar" style="width: 14%;" aria-valuenow="14" aria-valuemin="0" aria-valuemax="14"></div>
									</div>
								</div><span class="text-muted ms-3">40</span>
							</div>

						</div>
						<div class=" col-lg-12 col-sm-12">
							<a id="btnAll" class="btn btn-light border-primary">Tất cả</a>
							<a id="btn5Star" class="btn btn-light">5 sao</a>
							<a id="btn4Star" class="btn btn-light">4 sao</a>
							<a id="btn3Star" class="btn btn-light">3 sao</a>
							<a id="btn2Star" class="btn btn-light">2 sao</a>
							<a id="btn1Star" class="btn btn-light">1 sao</a>

							<button type="button" id="openDialog" class="btn btn-info ml-lg-5 ml-md-4 mt-phone-custom">Viết đánh giá</button>
						</div>
					</div>
					<!-- Start form đánh giá-->
                    <div class="dialog p-2" id="dialog">
						<form>
							<button type="button" class="closeDialog float-right"><i class="fas fa-times"></i></button>
                            <div class="d-flex flex-column justify-content-center align-items-center">
								<h4 >Đánh giá sản phẩm</h4>
								<img src="@Model.Product.Thumbnail" alt="" />
                                <h5 class="mt-3 mb-3">@Model.Product.Name</h5>
							</div>
							<div class=" d-flex justify-content-center my-3">
								<div class="rating-box ">
									<div class="stars ">
										<i class="fa fa-star"></i>
										<i class="fa fa-star"></i>
										<i class="fa fa-star"></i>
										<i class="fa fa-star"></i>
										<i class="fa fa-star"></i>
									</div>
								</div>
							</div>
							<div class="form-group">
								<textarea class="form-control " id="comment" rows="3" placeholder="Mời bạn chia sẻ thêm cảm nhận..."></textarea>
							</div>

							<div class="form-row">
								<div class="form-group col-md-6 mt-2">
									<input type="text" class="form-control" id="fullName" placeholder="Họ và tên">
								</div>

								<div class="form-group col-md-6 mt-2">
									<input type="text" class="form-control" id="phoneNumber" placeholder="Số điện thoại">
								</div>
							</div>

							<button type="submit" class="btn btn-primary">Gửi đánh giá</button>
						</form>
					</div>
                    <div class="background-black"></div>
					<!-- end form đánh giá-->

					<div>
						<!--Start phần bình luận đánh giá -->
						<div class="border-top py-2 reviewcomment ">
							@if (@ViewBag.AllReview != null && @ViewBag.AllReview.Count > 0)
							{
								@foreach (var review in @ViewBag.AllReview)
								{
									<div class="border-bottom mb-5">
										<div class="w-50 d-flex">
											<img class="rounded-circle img-sm border mr-3 " src="~/images/avatars/avatar3.jpg">

											<div>
												<span class="UserName-review">@review.FullName</span>
												<div>
													<ul class="rating-stars-review orange-stars">
														@{
															for (int i = 1; i <= @review.Rating; i++)
															{
																<li>&#9733;</li>
															}
														}

													</ul>
												</div>
												<p class="createDate-review">@review.CreatedDate </p>

											</div>
										</div>
										<p class="my-3 content-review">
											@review.Comment
										</p>
									</div>
								}
							}
							else
							{
								<p> Không có đánh giá nào</p>
							}

						</div>
						<!--End phần bình luận đánh giá -->




					</div>
				</div>
				<!--End phần đánh giá-->
			</div> 
			

		</div> 

	</div> 
</section>
<!-- ========================= End Phần mô tả và đánh gía ========================= -->
<!-- Start phần sản phẩm liên quan-->
<section class="padding-bottom-sm">

	<header class="section-heading heading-line">
		<h4 class="title-section text-uppercase">Sản phẩm liên quan</h4>
	</header>

	<div class="row row-sm">

		@foreach (var relatedProduct in @Model.relatedProducts)
		{
			
		<div class="col-xl-2 col-lg-3 col-md-4 col-6">
				<div class="card card-sm card-product-grid">
					<a asp-controller="Product" asp-action="Detail" asp-route-id="@relatedProduct.ProductId" class="img-wrap"> <img  src="@relatedProduct.Thumbnail"> </a>
					<figcaption class="info-wrap">
						<a asp-controller="Product" asp-action="Detail" asp-route-id="@relatedProduct.ProductId" class="title-product-custom">@relatedProduct.Name</a>
						<div class="price-wrap my-2">
							<span class="price">@relatedProduct.PriceSale</span>
							<del class="price-old">@relatedProduct.Price</del>
						</div> <!-- price-wrap.// -->
						<a asp-controller="Product" asp-action="Detail" asp-route-id="@relatedProduct.ProductId" class="btn btn-block btn-primary text-white">Mua ngay</a>
					</figcaption>
				</div>
			</div>
		}

		
		
	</div>
</section>

<!-- end phần sản phẩm liên quan-->